<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Shivani's Weather App</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1: #0f172a;
    --bg2: #0b1220;
    --card: rgba(255,255,255,0.06);
    --glass: rgba(255,255,255,0.06);
    --accent: #64d3ff;
    --text: #e6eef8;
    --muted: #9fb3c8;
    --glass-border: rgba(255,255,255,0.06);
  }
  *{box-sizing:border-box;}
  html,body{height:100%; margin:0; padding:0;}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    color: var(--text);
    display:flex;
    justify-content:center;
    padding:20px;
  }
  .app{
    width:100%;
    max-width:1000px;
    background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:20px;
    padding:24px;
    backdrop-filter: blur(8px) saturate(120%);
    box-shadow: 0 10px 40px rgba(4,7,18,0.6);
    border: 1px solid rgba(255,255,255,0.03);
  }
  header{
    display:flex;
    flex-wrap:wrap;
    justify-content:space-between;
    align-items:center;
    margin-bottom:20px;
    gap:12px;
  }
  .brand{
    display:flex;
    align-items:center;
    gap:14px;
  }
  .logo{
    width:54px;height:54px;border-radius:12px;
    display:grid;place-items:center;
    background:linear-gradient(135deg,#6ee7f9,#4f46e5);
    font-weight:800;color:#012;font-family: Montserrat, sans-serif;
  }
  h1{margin:0;font-size:18px;}
  .subtitle{font-size:12px;color:var(--muted);}
  .controls{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
  }
  .search{
    display:flex;
    align-items:center;
    gap:8px;
    background:var(--glass);
    border-radius:12px;
    padding:8px 10px;
    border:1px solid var(--glass-border);
  }
  .search input{
    background:transparent;
    border:0;
    outline:0;
    color:var(--text);
    font-size:15px;
    width:200px;
  }
  .btn{
    padding:9px 12px;
    border-radius:10px;
    border:0;
    cursor:pointer;
    font-weight:600;
    background:linear-gradient(135deg,#2b6ef6,#8133ff);
    color:white;
  }
  .btn.ghost{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--text);
  }

  .main{
    display:grid;
    grid-template-columns: 1fr 350px;
    gap:20px;
    align-items:start;
  }

  .weather-card, .sidebar{
    background: var(--card);
    border-radius:16px;
    padding:20px;
    border:1px solid rgba(255,255,255,0.02);
  }

  .weather-card .sky{
    position:relative;
    height:200px;
    border-radius:12px;
    margin-bottom:14px;
    background: linear-gradient(180deg,#87ceeb,#a2d5f2);
    overflow:hidden;
  }

  .info-row{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
  }
  .left-info{
    display:flex;
    flex-direction:column;
    gap:6px;
  }
  .city{font-size:20px;font-weight:700;}
  .time{color:var(--muted);font-size:13px;}
  .temp{font-size:48px;font-weight:800;margin:0; display:flex;align-items:center;gap:10px;}
  .desc{color:var(--muted);font-weight:600;text-transform:capitalize;}

  .metric{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px dashed rgba(255,255,255,0.02);}
  .metric:last-child{border-bottom:0;}
  .metric .k{font-weight:700;}
  .metric .v{color:var(--muted);}

  .forecast{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin-top:10px;
  }
  .forecast .f{
    flex:1 1 80px;
    background:rgba(255,255,255,0.02);
    padding:8px;
    border-radius:8px;
    text-align:center;
  }

  .credits{font-size:12px;color:var(--muted);margin-top:12px;text-align:center;}

  /* Responsive adjustments */
  @media(max-width:900px){
    .main{grid-template-columns:1fr;}
    .sidebar{order:2;}
  }

  @media(max-width:600px){
    body{padding:12px;}
    .app{padding:16px;border-radius:16px;}
    header{flex-direction:column;align-items:flex-start;gap:10px;}
    .brand h1{font-size:16px;}
    .subtitle{font-size:11px;}
    .controls{flex-direction:column;width:100%;}
    .search input{width:100%;font-size:14px;}
    .btn{width:100%;padding:8px;font-size:14px;}
    .info-row{flex-direction:column;gap:6px;}
    .temp{font-size:36px;}
    .city{font-size:18px;}
    .time{font-size:12px;}
    .metric{flex-direction:column;align-items:flex-start;padding:6px 0;}
    .forecast .f{flex:1 1 100%;padding:6px;}
  }
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="brand">
      <div class="logo">SW</div>
      <div>
        <h1>Shivani's WeatherApp</h1>
        <div class="subtitle">Real-time ¬∑ Animated ¬∑ Friendly</div>
      </div>
    </div>
    <div class="controls">
      <div class="search">
        <input id="cityInput" placeholder="Search city" aria-label="Search city">
        <button class="btn ghost" id="searchBtn">üîé</button>
      </div>
      <button class="btn" id="locBtn">üìç Use my location</button>
    </div>
  </header>

  <div class="main">
    <section class="weather-card">
      <div class="sky"></div>
      <div class="info-row">
        <div class="left-info">
          <div class="city" id="cityName">‚Äî</div>
          <div class="time" id="localTime">‚Äî</div>
        </div>
        <div style="text-align:right">
          <p class="temp" id="temp">--¬∞C</p>
          <div class="desc" id="desc">‚Äî</div>
        </div>
      </div>
      <div style="margin-top:12px;display:flex;justify-content:space-between">
        <div>Wind: <span id="windVal">‚Äî</span></div>
        <div>Humidity: <span id="humVal">‚Äî</span></div>
        <div>Pressure: <span id="presVal">‚Äî</span></div>
      </div>
      <div class="credits">Data from OpenWeatherMap</div>
    </section>

    <aside class="sidebar">
      <div class="metric"><div class="k">Sunrise</div><div class="v" id="sunrise">‚Äî</div></div>
      <div class="metric"><div class="k">Sunset</div><div class="v" id="sunset">‚Äî</div></div>
      <div class="metric"><div class="k">Visibility</div><div class="v" id="vis">‚Äî</div></div>
      <div class="metric"><div class="k">Clouds</div><div class="v" id="cloudsVal">‚Äî</div></div>
      <div style="margin-top:10px;font-weight:700">3-day Forecast</div>
      <div class="forecast" id="forecast"></div>
      <div style="margin-top:10px;color:var(--muted)" id="tip">‚Äî</div>
    </aside>
  </div>
</div>

<script>
const API_KEY = '9e509fc5dc982b3d2eee42e7de02967b';
const cityInput = document.getElementById('cityInput');
const searchBtn = document.getElementById('searchBtn');
const locBtn = document.getElementById('locBtn');

const cityName = document.getElementById('cityName');
const localTime = document.getElementById('localTime');
const tempEl = document.getElementById('temp');
const descEl = document.getElementById('desc');
const windVal = document.getElementById('windVal');
const humVal = document.getElementById('humVal');
const presVal = document.getElementById('presVal');
const sunrise = document.getElementById('sunrise');
const sunset = document.getElementById('sunset');
const vis = document.getElementById('vis');
const cloudsVal = document.getElementById('cloudsVal');
const forecastEl = document.getElementById('forecast');
const tipEl = document.getElementById('tip');

function formatTime(ts){return new Date(ts*1000).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});}
function generateTip(cond){
  if(cond.includes('rain')) return "Carry umbrella ‚òî";
  if(cond.includes('clear')) return "Enjoy the sun üòé";
  if(cond.includes('cloud')) return "Might need a light jacket üå•Ô∏è";
  if(cond.includes('snow')) return "Stay warm ‚ùÑÔ∏è";
  return "Have a nice day!";
}

async function fetchWeather(city){
  const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`);
  if(!res.ok) throw new Error('City not found');
  return res.json();
}

async function fetchWeatherCoords(lat,lon){
  const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`);
  if(!res.ok) throw new Error('Weather error');
  return res.json();
}

function setWeather(data){
  cityName.textContent = `${data.name}, ${data.sys.country}`;
  localTime.textContent = new Date().toLocaleString();
  tempEl.textContent = `${Math.round(data.main.temp)}¬∞C`;
  descEl.textContent = data.weather[0].description;
  windVal.textContent = `${data.wind.speed} m/s`;
  humVal.textContent = `${data.main.humidity}%`;
  presVal.textContent = `${data.main.pressure} hPa`;
  sunrise.textContent = formatTime(data.sys.sunrise);
  sunset.textContent = formatTime(data.sys.sunset);
  vis.textContent = `${(data.visibility/1000).toFixed(1)} km`;
  cloudsVal.textContent = `${data.clouds.all}%`;
  tipEl.textContent = generateTip(data.weather[0].main);

  // forecast mock
  forecastEl.innerHTML = '';
  for(let i=0;i<3;i++){
    const f = document.createElement('div'); f.className='f';
    f.innerHTML=`Day ${i+1}<br>${Math.round(data.main.temp+Math.random()*3-1)}¬∞C`;
    forecastEl.appendChild(f);
  }
}

searchBtn.onclick = ()=>{ if(cityInput.value) loadCity(cityInput.value); }
cityInput.addEventListener('keydown',e=>{ if(e.key==='Enter') loadCity(cityInput.value); });

locBtn.onclick = ()=>{
  navigator.geolocation.getCurrentPosition(pos=>loadCoords(pos.coords.latitude,pos.coords.longitude),()=>alert("Location access denied"));
}

async function loadCity(city){
  try{
    const data = await fetchWeather(city);
    setWeather(data);
  }catch(e){alert(e.message);}
}
async function loadCoords(lat,lon){
  try{
    const data = await fetchWeatherCoords(lat,lon);
    setWeather(data);
  }catch(e){alert(e.message);}
}

// default load
loadCity('London');
</script>
</body>
</html>
